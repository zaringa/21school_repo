#include "../s21_decimal.h"
#include "test.h"

static s21_decimal value_1[] = {

    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // +0
    {{0x00000000, 0x00000000, 0x00000000, 0x00030000}},  // 0.000
    {{0x00000000, 0x00000000, 0x00000000, 0x801C0000}},  // -0e-28
    {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  // 1
    {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x00000000}},  // 2^96
    {{0x00000001, 0x00000000, 0x00000000, 0x80000000}},  // -1
    {{0x00000001, 0x00000000, 0x00000000, 0x00010000}},  // 0.1
    {{0x0000000A, 0x00000000, 0x00000000, 0x00000000}},  // 10

    {{0x0000007B, 0x00000000, 0x00000000, 0x00000000}},  // 123
    {{0x000004CF, 0x00000000, 0x00000000, 0x00010000}},  // 123.1
    {{0x0001E0F3, 0x00000000, 0x00000000, 0x00030000}},  // 123.123
    {{0x49632511, 0x00000000, 0x00000000, 0x00070000}},  // 123.1234321
    {{0x49632512, 0x00000000, 0x00000000, 0x00070000}},  // 123.1234322
    {{0x8E000001, 0x9B9C9DBB, 0x03F96EA1,
      0x00190000}},  // 123.0000000000000000000000001
    {{0x8E000002, 0x9B9C9DBB, 0x03F96EA1,
      0x00190000}},  // 123.0000000000000000000000002
    {{0x0000FFFF, 0x00000000, 0x00000000, 0x00000000}},  // 65535
    {{0x000100A4, 0x00000000, 0x00000000, 0x00000000}},  // 65700
    {{0xFFFFFFFF, 0x000000FF, 0x00000000, 0x00000000}},  // 1099511627775
    {{0x37FF4ED4, 0x466FE65A, 0x00E1305A,
      0x80050000}},  // -2722366482869645213695.54644
    {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
      0x00000000}},  // 4951760157141521099596496895

    {{0x000003E8, 0x00000000, 0x00000000, 0x00020000}},  // 10.00

};

static s21_decimal value_2[] = {

    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000000, 0x00000000, 0x00000000, 0x80000000}},  // -0
    {{0x00000000, 0x00000000, 0x00000000, 0x000A0000}},  // 0.0000000000
    {{0x00000000, 0x00000000, 0x00000000, 0x001C0000}},  // 0e-28
    {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  // 1
    {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0x80000000}},  // -2^96
    {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  // +1
    {{0x0000000A, 0x00000000, 0x00000000, 0x00010000}},  // 1.0 (10/10)
    {{0x0000000A, 0x00000000, 0x00000000, 0x00000000}},  // 10
    {{0x0000007B, 0x00000000, 0x00000000, 0x00000000}},  // 123
    {{0x000004CF, 0x00000000, 0x00000000, 0x80010000}},  // -123.1
    {{0x0001E0F3, 0x00000000, 0x00000000, 0x00030000}},  // 123.123
    {{0x49632510, 0x00000000, 0x00000000, 0x00070000}},  // 123.1234320
    {{0x49632511, 0x00000000, 0x00000000, 0x00070000}},  // 123.1234321
    {{0x8E000001, 0x9B9C9DBB, 0x03F96EA1,
      0x00190000}},  // 123.0000000000000000000000001
    {{0x8E000003, 0x9B9C9DBB, 0x03F96EA1,
      0x00190000}},  // 123.0000000000000000000000003
    {{0x0000FFFF, 0x00000000, 0x00000000, 0x00000000}},  // 65535
    {{0x000100A4, 0x00000000, 0x00000000, 0x80000000}},  // -65700
    {{0xFFFFFFFF, 0x000000FF, 0x00000000, 0x80000000}},  // -1099511627775
    {{0x37FF4ED5, 0x466FE65A, 0x00E1305A,
      0x80050000}},  // -2722366482869645213695.54645
    {{0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF,
      0x00000000}},  // 4951760157141521099596496895

    {{0x000F4240, 0x00000000, 0x00000000, 0x00050000}},  // 10.00000
};

static int expected_result_less_or_equal[] = {
    1, 1, 1, 1,
    1,  // 1 == 1
    0,  // 2^96 > -2^96
    1,  // -1 < +1
    1,  // 0.1 < 1
    1,  // 10 == 10
    1,  // 123 == 123

    0,  // 123.1 > -123.1
    1,  // 123.123 == 123.123
    0,  // 123.1234321 > 123.1234320
    0,  // 123.1234322 > 123.1234321
    1,  // 123.000...01 == 123.000...01

    1,  // 123.000...02 < 123.000...03
    1,  // 65535 == 65535
    0,  // 65700 > -65700
    0,  // 1099511627775 > -1099511627775
    0,  // -2722366482869645213695.54644 > -2722366482869645213695.54645  !!!!!
    1,  // 4951760157141521099596496895 == 4951760157141521099596496895
    1,  // 10.000 == 10.00000
};

START_TEST(test_s21_is_less_or_equal) {
  for (size_t i = 0; i < sizeof(value_1) / sizeof(s21_decimal); i++) {
    int res = s21_is_less_or_equal(value_1[i], value_2[i]);
    if (res != expected_result_less_or_equal[i]) {
      printf("Test %zu failed: s21_is_less_or_equal returned %d, expected %d\n",
             i, res, expected_result_less_or_equal[i]);
    }
    ck_assert_int_eq(res, expected_result_less_or_equal[i]);
  }
}
END_TEST

TCase *s21_is_less_or_equal_tcase(void) {
  TCase *tc = tcase_create("s21_is_less_or_equal");
  tcase_add_test(tc, test_s21_is_less_or_equal);

  return tc;
}